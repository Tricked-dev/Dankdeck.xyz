---
import { getSession } from "auth-astro/server";
import Layout from "@/layouts/Layout.astro";
import MyCards from "@/components/card/MyCards.svelte";
import { client } from "../../client";
import { getCardsView } from "@/lib/queries";
const session = await getSession(Astro.request);

if (!session || !session.user) {
  return Astro.redirect("/");
}

const cards = await getCardsView(session.user.id);
---

<Layout session={session} title="My Cards">
  <MyCards cards={cards} client:load />
</Layout>
