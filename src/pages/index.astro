---
import { getSession } from "auth-astro/server";
import MarketPlace from "@/components/MarketPlace.svelte";
import Layout from "@/layouts/Layout.astro";
import { client } from "../../client";
const session = await getSession(Astro.request);

const auctions = await client.query(`
  select BinAuction {
    id,
    price,
    card: {
      id,
      number,
      meme: {
        id,
        shortId,
        name,
        description
      }
    }
  }
`);
---

<Layout session={session} title="Marketplace">
  <MarketPlace auctions={auctions} client:load />
</Layout>
